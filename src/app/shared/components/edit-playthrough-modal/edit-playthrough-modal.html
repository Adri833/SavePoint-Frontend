<div class="overlay" (click)="close()"></div>

<div class="modal">
  <h2>Editar partida</h2>

  <form (ngSubmit)="updatePlaythrough()" novalidate>
    <!-- Fecha inicio -->
    <label>
      Fecha de inicio
      <input #dateInput type="text" required />
    </label>

    @if (!isPlaying) {
      <!-- Horas -->
      <label>
        Horas jugadas
        <div class="number-wrapper">
          <input type="number" min="0" [(ngModel)]="hours" name="hours" #hoursInput />
          <div class="spinner">
            <div class="arrow up" (click)="increment(hoursInput)"></div>
            <div class="arrow down" (click)="decrement(hoursInput)"></div>
          </div>
        </div>
      </label>

      <!-- Checkboxes -->
      <div class="checkbox-group">
        <label>
          <input
            type="checkbox"
            [(ngModel)]="completed"
            name="completed"
            (change)="onCompletedChange()"
          />
          Historia completada
        </label>

        <label>
          <input
            type="checkbox"
            [(ngModel)]="platinum"
            name="platinum"
            (change)="onPlatinumChange()"
            [disabled]="!completed"
          />
          Platino conseguido
        </label>
      </div>
    }

    <!-- Notas -->
    <label>
      Notas
      <textarea [(ngModel)]="notes" name="notes" rows="3"></textarea>
    </label>

    @if (errorMessage) {
      <p class="error">{{ errorMessage }}</p>
    }

    <div class="actions">
      <button type="button" class="cancel" (click)="close()">Cancelar</button>

      <button type="submit" [disabled]="isLoading">
        <span class="btn-content" [class.hidden]="isLoading">Guardar</span>

        @if (isLoading) {
          <span class="btn-spinner"></span>
        }
      </button>
    </div>
  </form>
</div>
